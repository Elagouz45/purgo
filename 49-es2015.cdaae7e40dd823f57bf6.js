(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{Zuxc:function(t,e,a){"use strict";a.r(e),a.d(e,"RequestModule",function(){return it});var c=a("tyNb"),n=a("bTqV"),s=a("bSwM"),i=a("FKr1"),o=a("iadO"),r=a("kmnG"),l=a("NFeN"),d=a("qFsG"),b=a("STbY"),h=a("+0xr"),u=a("/t3+"),m=a("wZkO"),p=a("5HBU"),f=a("LPQX"),g=a("3Pt+"),x=a("XNiG"),C=a("1G5W"),w=a("Kj3r"),v=a("/uUt"),S=a("PVWW"),_=a("fXoL"),y=a("2Vo4"),D=a("jD4G");class X{constructor(t){this.id=t.id||D.a.generateGUID(),this.name=t.name||"",this.parentName=t.parent_name||"",this.schoolName=t.school_name||"",this.childName=t.child_name||"",this.requestDate=t.request_date||"",this.childId=t.child_id||""}}var W=a("tk/3");let L=(()=>{class t{constructor(t){this._httpClient=t,this.selectedContacts=[],this.onContactsChanged=new y.a([]),this.onSelectedContactsChanged=new y.a([]),this.onUserDataChanged=new y.a([]),this.onSearchTextChanged=new x.a,this.onFilterChanged=new x.a}resolve(t,e){return new Promise((t,e)=>{Promise.all([this.getData(),this.getUserData()]).then(([e])=>{this.onSearchTextChanged.subscribe(t=>{this.searchText=t,this.getData()}),this.onFilterChanged.subscribe(t=>{this.filterBy=t,this.getData()}),t()},e)})}getData(){return new Promise((t,e)=>{this._httpClient.post("https://dashboard.wingz.app/vt_wingz_v2_web_dashboard_apis/public/api/requests",null).subscribe(e=>{this.data=e.data,this.data=this.data.map(t=>new X(t)),this.onContactsChanged.next(this.data),t(this.data)},e)})}getUserData(){return new Promise((t,e)=>{this._httpClient.get("api/contacts-user/5725a6802d10e277a0f35724").subscribe(e=>{this.user=e,this.onUserDataChanged.next(this.user),t(this.user)},e)})}toggleSelectedContact(t){if(this.selectedContacts.length>0){const e=this.selectedContacts.indexOf(t);if(-1!==e)return this.selectedContacts.splice(e,1),void this.onSelectedContactsChanged.next(this.selectedContacts)}this.selectedContacts.push(t),this.onSelectedContactsChanged.next(this.selectedContacts)}toggleSelectAll(){this.selectedContacts.length>0?this.deselectContacts():this.selectContacts()}selectContacts(t,e){this.selectedContacts=[],void 0!==t&&void 0!==e||(this.selectedContacts=[],this.data.map(t=>{this.selectedContacts.push(t.id)})),this.onSelectedContactsChanged.next(this.selectedContacts)}updateContact(t){return new Promise((e,a)=>{this._httpClient.post("api/contacts-contacts/"+t.id,Object.assign({},t)).subscribe(t=>{this.getData(),e(t)})})}updateUserData(t){return new Promise((e,a)=>{this._httpClient.post("api/contacts-user/"+this.user.id,Object.assign({},t)).subscribe(t=>{this.getUserData(),this.getData(),e(t)})})}deselectContacts(){this.selectedContacts=[],this.onSelectedContactsChanged.next(this.selectedContacts)}deleteContact(t){const e=this.data.indexOf(t);this.data.splice(e,1),this.onContactsChanged.next(this.data)}deleteSelectedContacts(){for(const t of this.selectedContacts){const e=this.data.find(e=>e.id===t),a=this.data.indexOf(e);this.data.splice(a,1)}this.onContactsChanged.next(this.data),this.deselectContacts()}}return t.\u0275fac=function(e){return new(e||t)(_.bc(W.b))},t.\u0275prov=_.Nb({token:t,factory:t.\u0275fac}),t})();var N=a("HX77"),k=a("0IaG"),O=a("B9zo"),A=a("XiUz"),F=a("znSr"),R=a("EwFO"),U=a("0EQZ"),j=a("2nsM");const q=["dialogContent"];function P(t,e){1&t&&(_.Xb(0,"mat-header-cell"),_.Nc(1,"Request Date"),_.Wb())}function I(t,e){if(1&t&&(_.Xb(0,"mat-cell"),_.Xb(1,"p",11),_.Nc(2),_.Wb(),_.Wb()),2&t){const t=e.$implicit;_.Fb(2),_.Oc(t.requestDate)}}function T(t,e){1&t&&(_.Xb(0,"mat-header-cell"),_.Nc(1,"School"),_.Wb())}function V(t,e){if(1&t&&(_.Xb(0,"mat-cell"),_.Xb(1,"p",11),_.Nc(2),_.Wb(),_.Wb()),2&t){const t=e.$implicit;_.Fb(2),_.Oc(t.schoolName)}}function z(t,e){1&t&&(_.Xb(0,"mat-header-cell"),_.Nc(1,"Parent Name"),_.Wb())}function G(t,e){if(1&t&&(_.Xb(0,"mat-cell"),_.Xb(1,"p",11),_.Nc(2),_.Wb(),_.Wb()),2&t){const t=e.$implicit;_.Fb(2),_.Oc(t.parentName)}}function H(t,e){1&t&&(_.Xb(0,"mat-header-cell"),_.Nc(1,"Child Name"),_.Wb())}function M(t,e){if(1&t&&(_.Xb(0,"mat-cell"),_.Xb(1,"p",11),_.Nc(2),_.Wb(),_.Wb()),2&t){const t=e.$implicit;_.Fb(2),_.Oc(t.childName)}}function $(t,e){1&t&&_.Sb(0,"mat-header-cell")}function B(t,e){if(1&t&&(_.Xb(0,"mat-cell"),_.Xb(1,"div",12),_.Xb(2,"a",13),_.Xb(3,"button",14),_.Nc(4," Assign Drivers "),_.Wb(),_.Wb(),_.Wb(),_.Wb()),2&t){const t=e.$implicit;_.Fb(2),_.rc("routerLink","/views/assignDriversToRequest/",t.id,"")}}function Q(t,e){1&t&&_.Sb(0,"mat-header-row")}const Z=function(){return{y:"100%"}},E=function(t){return{value:"*",params:t}};function J(t,e){1&t&&_.Sb(0,"mat-row",15),2&t&&_.pc("@animate",_.tc(2,E,_.sc(1,Z)))}const K=function(){return{value:"50"}};let Y=(()=>{class t{constructor(t,e){this._contactsService=t,this._matDialog=e,this.displayedColumns=["parentName","requestDate","schoolName","childName","button"],this._unsubscribeAll=new x.a}ngOnInit(){this.dataSource=new tt(this._contactsService),this._contactsService.onContactsChanged.pipe(Object(C.a)(this._unsubscribeAll)).subscribe(t=>{this.contacts=t,this.checkboxes={},t.map(t=>{this.checkboxes[t.id]=!1})}),this._contactsService.onSelectedContactsChanged.pipe(Object(C.a)(this._unsubscribeAll)).subscribe(t=>{for(const e in this.checkboxes)this.checkboxes.hasOwnProperty(e)&&(this.checkboxes[e]=t.includes(e));this.selectedContacts=t}),this._contactsService.onUserDataChanged.pipe(Object(C.a)(this._unsubscribeAll)).subscribe(t=>{this.user=t}),this._contactsService.onFilterChanged.pipe(Object(C.a)(this._unsubscribeAll)).subscribe(()=>{this._contactsService.deselectContacts()})}ngOnDestroy(){this._unsubscribeAll.next(),this._unsubscribeAll.complete()}deleteContact(t){this.confirmDialogRef=this._matDialog.open(j.a,{disableClose:!1}),this.confirmDialogRef.componentInstance.confirmMessage="Are you sure you want to delete?",this.confirmDialogRef.afterClosed().subscribe(e=>{e&&this._contactsService.deleteContact(t),this.confirmDialogRef=null})}onSelectedChange(t){this._contactsService.toggleSelectedContact(t)}toggleStar(t){this.user.starred.includes(t)?this.user.starred.splice(this.user.starred.indexOf(t),1):this.user.starred.push(t),this._contactsService.updateUserData(this.user)}}return t.\u0275fac=function(e){return new(e||t)(_.Rb(L),_.Rb(k.b))},t.\u0275cmp=_.Lb({type:t,selectors:[["list-component"]],viewQuery:function(t,e){if(1&t&&_.Rc(q,!0),2&t){let t;_.wc(t=_.gc())&&(e.dialogContent=t.first)}},decls:19,vars:5,consts:[[3,"dataSource"],["table",""],["matColumnDef","requestDate"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","schoolName"],["matColumnDef","parentName"],["matColumnDef","childName"],["matColumnDef","button"],[4,"matHeaderRowDef"],["class","contact",4,"matRowDef","matRowDefColumns"],[1,"text-truncate","font-weight-600"],["fxFlex","row","fxLayoutAlign","end center"],[3,"routerLink"],["mat-raised-button","","color","primary","aria-label","More"],[1,"contact"]],template:function(t,e){1&t&&(_.Xb(0,"mat-table",0,1),_.Vb(2,2),_.Lc(3,P,2,0,"mat-header-cell",3),_.Lc(4,I,3,1,"mat-cell",4),_.Ub(),_.Vb(5,5),_.Lc(6,T,2,0,"mat-header-cell",3),_.Lc(7,V,3,1,"mat-cell",4),_.Ub(),_.Vb(8,6),_.Lc(9,z,2,0,"mat-header-cell",3),_.Lc(10,G,3,1,"mat-cell",4),_.Ub(),_.Vb(11,7),_.Lc(12,H,2,0,"mat-header-cell",3),_.Lc(13,M,3,1,"mat-cell",4),_.Ub(),_.Vb(14,8),_.Lc(15,$,1,0,"mat-header-cell",3),_.Lc(16,B,5,1,"mat-cell",4),_.Ub(),_.Lc(17,Q,1,0,"mat-header-row",9),_.Lc(18,J,1,4,"mat-row",10),_.Wb()),2&t&&(_.pc("dataSource",e.dataSource)("@animateStagger",_.sc(4,K)),_.Fb(17),_.pc("matHeaderRowDef",e.displayedColumns),_.Fb(1),_.pc("matRowDefColumns",e.displayedColumns))},directives:[h.j,h.c,h.e,h.b,h.g,h.i,h.d,h.a,A.a,A.b,c.i,n.b,h.f,h.h],styles:["list-component{display:flex;flex:1 1 auto;width:100%}list-component .mat-table{width:100%;background:transparent;box-shadow:none}list-component .mat-table .mat-column-checkbox{flex:0 1 64px;padding-left:18px}list-component .mat-table .mat-column-avatar{flex:0 1 64px}list-component .mat-table .mat-column-buttons{flex:0 1 80px}list-component .mat-table label{height:10px;width:10px;border-radius:50%}list-component .mat-table .mat-row{position:relative;cursor:pointer;padding:8px}list-component .mat-table .mat-row .mat-cell{min-width:0}list-component .mat-table .mat-row .mat-cell.mat-column-detail-button{flex:0 1 auto;padding:0 24px 0 0}@media screen and (min-width:1280px){list-component .mat-table .mat-row .mat-cell.mat-column-detail-button{display:none}}#add-contact-button{position:absolute;bottom:12px;right:12px;padding:0;z-index:99}@media screen and (max-width:599px){#add-contact-button{position:-webkit-sticky;position:sticky;top:calc(100vh - 120px);bottom:auto}}"],encapsulation:2,data:{animation:S.a}}),t})();class tt extends U.b{constructor(t){super(),this._contactsService=t}connect(){return this._contactsService.onContactsChanged}disconnect(){}}const et=function(){return{delay:"50ms",scale:"0.2"}},at=function(t){return{value:"*",params:t}},ct=function(){return{delay:"100ms",x:"-25px"}},nt=function(){return{delay:"300ms",scale:".2"}},st=[{path:"**",component:(()=>{class t{constructor(t,e,a){this._contactsService=t,this._fuseSidebarService=e,this._matDialog=a,this.searchInput=new g.e(""),this._unsubscribeAll=new x.a}ngOnInit(){this._contactsService.onSelectedContactsChanged.pipe(Object(C.a)(this._unsubscribeAll)).subscribe(t=>{this.hasSelectedContacts=t.length>0}),this.searchInput.valueChanges.pipe(Object(C.a)(this._unsubscribeAll),Object(w.a)(300),Object(v.a)()).subscribe(t=>{this._contactsService.onSearchTextChanged.next(t)})}ngOnDestroy(){this._contactsService.onSearchTextChanged.next(""),this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(t){this._fuseSidebarService.getSidebar(t).toggleOpen()}}return t.\u0275fac=function(e){return new(e||t)(_.Rb(L),_.Rb(N.a),_.Rb(k.b))},t.\u0275cmp=_.Lb({type:t,selectors:[["request"]],decls:26,vars:13,consts:[["id","contacts",1,"page-layout","simple","left-sidebar","inner-sidebar","inner-scroll"],["fxLayout","column","fxLayoutAlign","start","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","space-between center",1,"header","accent","p-16","p-sm-24"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","","fxHide.gt-sm","",1,"sidebar-toggle","mr-12",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","",1,"ml-sm-32"],[1,"search-wrapper","mt-16","mt-sm-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["placeholder","Search",3,"formControl"],[1,"content"],["fusePerfectScrollbar","",1,"center","p-24","pb-56","pr-sm-92"],["dynamicHeight",""],["label","ALL"],["mat-fab","","id","add-contact-button","aria-label","add contact",1,"accent"]],template:function(t,e){1&t&&(_.Xb(0,"div",0),_.Xb(1,"div",1),_.Xb(2,"div",2),_.Xb(3,"button",3),_.fc("click",function(){return e.toggleSidebar("contacts-main-sidebar")}),_.Xb(4,"mat-icon"),_.Nc(5,"menu"),_.Wb(),_.Wb(),_.Xb(6,"div",4),_.Xb(7,"mat-icon",5),_.Nc(8,"account_box "),_.Wb(),_.Xb(9,"span",6),_.Nc(10," Requests "),_.Wb(),_.Wb(),_.Wb(),_.Xb(11,"div",7),_.Xb(12,"div",8),_.Xb(13,"div",9),_.Xb(14,"mat-icon"),_.Nc(15,"search"),_.Wb(),_.Sb(16,"input",10),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(17,"div",11),_.Xb(18,"div",12),_.Xb(19,"div",11),_.Xb(20,"mat-tab-group",13),_.Xb(21,"mat-tab",14),_.Sb(22,"list-component"),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Wb(),_.Xb(23,"button",15),_.Xb(24,"mat-icon"),_.Nc(25,"person_add"),_.Wb(),_.Wb()),2&t&&(_.Fb(7),_.pc("@animate",_.tc(5,at,_.sc(4,et))),_.Fb(2),_.pc("@animate",_.tc(8,at,_.sc(7,ct))),_.Fb(7),_.pc("formControl",e.searchInput),_.Fb(7),_.pc("@animate",_.tc(11,at,_.sc(10,nt))))},directives:[O.a,A.c,A.b,n.b,F.b,l.a,A.a,g.c,g.n,g.f,R.a,m.b,m.a,Y],styles:["#contacts .header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}#contacts .header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}#contacts .header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}#contacts .content{overflow:hidden}#contacts .content .sidebar:not(.locked-open){background:#fff}contacts-contact-list{display:flex;flex:1 1 auto;width:100%}contacts-contact-list .mat-table{width:100%;background:transparent;box-shadow:none}contacts-contact-list .mat-table .mat-column-checkbox{flex:0 1 64px;padding-left:18px}contacts-contact-list .mat-table .mat-column-avatar{flex:0 1 64px}contacts-contact-list .mat-table .mat-column-buttons{flex:0 1 80px}contacts-contact-list .mat-table .mat-row{position:relative;cursor:pointer;padding:8px}contacts-contact-list .mat-table .mat-row .mat-cell{min-width:0}contacts-contact-list .mat-table .mat-row .mat-cell.mat-column-detail-button{flex:0 1 auto;padding:0 24px 0 0}@media screen and (min-width:1280px){contacts-contact-list .mat-table .mat-row .mat-cell.mat-column-detail-button{display:none}}#add-contact-button{position:absolute;bottom:12px;right:12px;padding:0;z-index:99}@media screen and (max-width:599px){#add-contact-button{position:-webkit-sticky;position:sticky;top:calc(100vh - 120px);bottom:auto}}"],encapsulation:2,data:{animation:S.a}}),t})(),resolve:{contacts:L}}];let it=(()=>{class t{}return t.\u0275mod=_.Pb({type:t}),t.\u0275inj=_.Ob({factory:function(e){return new(e||t)},providers:[L],imports:[[c.j.forChild(st),n.c,s.b,o.c,r.d,l.b,d.c,b.c,i.p,h.k,u.b,m.c,p.a,f.a,f.f]]}),t})()}}]);