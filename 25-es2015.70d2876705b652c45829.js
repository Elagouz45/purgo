(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{rCGI:function(t,e,s){"use strict";s.d(e,"a",function(){return i});var a=s("tk/3"),n=s("fXoL");let i=(()=>{class t{constructor(t){this.http=t,this.domain="https://dashboard.wingz.app/vt_wingz_v2_web_dashboard_apis/public/api",this.headers=(new a.d).set("Accept","application/json")}postRequest(t,e){return this.http.post(`${this.domain}/${t}`,e,this.headers)}getMembers(t=null){return this.postRequest("members",t)}getClubs(t=null){return this.postRequest("clubs",t)}getSchools(t=null){return this.postRequest("schools",t)}getDrivers(t=null){return this.postRequest("drivers",t)}allowedDriversForAddTrip(t=null){return this.postRequest("allowedDriversForAddTrip",t)}addTrip(t=null){return this.postRequest("addTrip",t)}assignDriversToRequest(t=null){return this.postRequest("assignDriversToRequest",t)}allowedDriversForAssign(t=null){return this.postRequest("allowedDriversForAssign?childId=1",t)}getMemberDetails(t=null){return this.postRequest("memberDetails",t)}getCountries(t=null){return this.postRequest("countries",t)}addCountry(t=null){return this.postRequest("add-country",t)}addClub(t=null){return this.postRequest("addClub",t)}getBranches(t=null){return this.postRequest("branches",t)}addBranch(t=null){return this.postRequest("addBranch",t)}editBranch(t=null){return this.postRequest("editBranch",t)}editClub(t=null){return this.postRequest("editClub",t)}DeleteCountry(t){return this.postRequest("delete-country",t)}addCity(t){return this.postRequest("add-city",t)}addDistrict(t){return this.postRequest("add-district",t)}EditDistricts(t){return this.postRequest("details-district",t)}DeleteDistrict(t){return this.postRequest("delete-district",t)}addRelation(t){return this.postRequest("add-relation",t)}addSlider(t){return this.postRequest("add-slider",t)}EditSlider(t){return this.postRequest("details-slider",t)}DeleteSlider(t){return this.postRequest("delete-slider",t)}addOpenScreen(t){return this.postRequest("add-open-screen",t)}DeleteOpenScreen(t){return this.postRequest("delete-open-screen",t)}EditOpenScreen(t){return this.postRequest("details-open-screen",t)}addSchool(t){return this.postRequest("add-school",t)}DeleteSchool(t){return this.postRequest("delete-school",t)}EditSchool(t){return this.postRequest("details-school",t)}addEducationType(t){return this.postRequest("add-education-type",t)}EditEducationType(t){return this.postRequest("details-education-type",t)}deleteEducationType(t){return this.postRequest("delete-education-type",t)}addEducationLevel(t){return this.postRequest("add-education-level",t)}EditEducationLevel(t){return this.postRequest("details-education-level",t)}deleteEducationLevel(t){return this.postRequest("delete-education-level",t)}addStage(t){return this.postRequest("add-stage",t)}editStage(t){return this.postRequest("details-stage",t)}DeleteStage(t){return this.postRequest("delete-stage",t)}getCarNames(t){return this.postRequest("car-names",t)}addCarName(t){return this.postRequest("add-car-name",t)}EditCarName(t){return this.postRequest("details-car-name",t)}DeleteCarName(t){return this.postRequest("delete-car-name",t)}addCarType(t){return this.postRequest("add-car-type",t)}EditCarType(t){return this.postRequest("details-car-type",t)}DeleteCarType(t){return this.postRequest("delete-car-type",t)}addManufacturingYear(t){return this.postRequest("add-manufacturing-year",t)}EditManufacturingYear(t){return this.postRequest("details-manufacturing-year",t)}DeleteManufacturingYear(t){return this.postRequest("delete-manufacturing-year",t)}EditCity(t){return this.postRequest("details-city",t)}DeleteCity(t){return this.postRequest("delete-city",t)}EditRelation(t){return this.postRequest("details-relation",t)}DeleteRelation(t){return this.postRequest("delete-relation",t)}getVoucherTypes(t){return this.postRequest("voucher-types",t)}DeleteVoucher(t){return this.postRequest("delete-voucher",t)}addNewVoucher(t){return this.postRequest("add-voucher",t)}assignPromoCodeToUsers(t){return this.postRequest("assign-voucher-to-users",t)}EditVoucher(t){return this.postRequest("details-voucher",t)}getEducationTypes(t=null){return this.postRequest("education-type",t)}DeletePlan(t=null){return this.postRequest("delete-plan",t)}addPlan(t=null){return this.postRequest("add-plan",t)}EditPlan(t=null){return this.postRequest("details-plan",t)}driverDetails(t){return this.postRequest("driver-details",t)}BlockDriver(t){return this.postRequest("block-driver",t)}UnBlockDriver(t){return this.postRequest("unblock-driver",t)}activeDriverAccount(t){return this.postRequest("active-driver",t)}activeDrivers(t=null){return this.postRequest("drivers",t)}blockedDrivers(t=null){return this.postRequest("blocked-drivers",t)}waitingDrivers(t=null){return this.postRequest("waiting-drivers",t)}sharingDrivers(t=null){return this.postRequest("sharing-drivers",t)}}return t.\u0275fac=function(e){return new(e||t)(n.bc(a.b))},t.\u0275prov=n.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},zkFd:function(t,e,s){"use strict";s.r(e),s.d(e,"AssignModule",function(){return rt});var a=s("tyNb"),n=s("bTqV"),i=s("bSwM"),c=s("FKr1"),r=s("iadO"),o=s("kmnG"),l=s("NFeN"),d=s("qFsG"),u=s("STbY"),h=s("+0xr"),p=s("/t3+"),b=s("wZkO"),m=s("5HBU"),g=s("LPQX"),f=s("3Pt+"),x=s("XNiG"),C=s("1G5W"),v=s("Kj3r"),w=s("/uUt"),R=s("PVWW"),q=s("fXoL"),y=s("2Vo4"),D=s("jD4G");class S{constructor(t){this.id=t.id||D.a.generateGUID(),this.image=t.image||"assets/images/defaults/profile.png",this.name=t.name||"",this.children=t.children||"",this.carLimit=t.carLimit||"",this.remains=t.remains||""}}var k=s("tk/3"),L=s("rCGI");let X=(()=>{class t{constructor(t,e){this._httpClient=t,this.apis=e,this.selectedContacts=[],this.onContactsChanged=new y.a([]),this.onSelectedContactsChanged=new y.a([]),this.onUserDataChanged=new y.a([]),this.onSearchTextChanged=new x.a,this.aboutOnChanged=new y.a({}),this.onFilterChanged=new x.a}resolve(t,e){return this.requestId=t.params.requestId,new Promise((t,e)=>{Promise.all([this.getData(),this.getUserData(),this.getAbout()]).then(([e])=>{this.onSearchTextChanged.subscribe(t=>{this.searchText=t,this.getData()}),this.onFilterChanged.subscribe(t=>{this.filterBy=t,this.getData()}),t()},e)})}getAbout(){return new Promise((t,e)=>{this._httpClient.get("api/profile-about").subscribe(e=>{this.about=e,this.aboutOnChanged.next(this.about),t(this.about)},e)})}getData(){return new Promise((t,e)=>{this.apis.allowedDriversForAssign().subscribe(e=>{this.data=e.data,this.data=this.data.map(t=>new S(t)),this.onContactsChanged.next(this.data),t(this.data)},e)})}getUserData(){return new Promise((t,e)=>{this._httpClient.get("api/contacts-user/5725a6802d10e277a0f35724").subscribe(e=>{this.user=e,this.onUserDataChanged.next(this.user),t(this.user)},e)})}toggleSelectedContact(t){if(this.selectedContacts.length>0){const e=this.selectedContacts.indexOf(t);if(-1!==e)return this.selectedContacts.splice(e,1),void this.onSelectedContactsChanged.next(this.selectedContacts)}this.selectedContacts.push(t),this.onSelectedContactsChanged.next(this.selectedContacts)}toggleSelectAll(){this.selectedContacts.length>0?this.deselectContacts():this.selectContacts()}selectContacts(t,e){this.selectedContacts=[],void 0!==t&&void 0!==e||(this.selectedContacts=[],this.data.map(t=>{this.selectedContacts.push(t.id)})),this.onSelectedContactsChanged.next(this.selectedContacts)}updateContact(t){return new Promise((e,s)=>{this._httpClient.post("api/contacts-contacts/"+t.id,Object.assign({},t)).subscribe(t=>{this.getData(),e(t)})})}updateUserData(t){return new Promise((e,s)=>{this._httpClient.post("api/contacts-user/"+this.user.id,Object.assign({},t)).subscribe(t=>{this.getUserData(),this.getData(),e(t)})})}deselectContacts(){this.selectedContacts=[],this.onSelectedContactsChanged.next(this.selectedContacts)}deleteContact(t){const e=this.data.indexOf(t);this.data.splice(e,1),this.onContactsChanged.next(this.data)}deleteSelectedContacts(){for(const t of this.selectedContacts){const e=this.data.find(e=>e.id===t),s=this.data.indexOf(e);this.data.splice(s,1)}this.onContactsChanged.next(this.data),this.deselectContacts()}}return t.\u0275fac=function(e){return new(e||t)(q.bc(k.b),q.bc(L.a))},t.\u0275prov=q.Nb({token:t,factory:t.\u0275fac}),t})();var W=s("HX77"),N=s("0IaG"),_=s("B9zo"),O=s("XiUz"),F=s("znSr"),A=s("EwFO"),I=s("ofXK");function T(t,e){1&t&&q.Sb(0,"mat-header-cell")}function E(t,e){if(1&t){const t=q.Yb();q.Xb(0,"mat-cell"),q.Xb(1,"mat-checkbox",14),q.fc("ngModelChange",function(s){q.Bc(t);const a=e.$implicit;return q.jc(2).checkboxes[a.id]=s})("ngModelChange",function(){q.Bc(t);const s=e.$implicit;return q.jc(2).onSelectedChange(s.id)})("click",function(t){return t.stopPropagation()}),q.Wb(),q.Wb()}if(2&t){const t=e.$implicit,s=q.jc(2);q.Fb(1),q.pc("ngModel",s.checkboxes[t.id])}}function j(t,e){1&t&&(q.Xb(0,"mat-header-cell"),q.Nc(1,"Driver Name"),q.Wb())}function P(t,e){if(1&t&&q.Sb(0,"img",17),2&t){const t=q.jc().$implicit;q.pc("alt",t.image)("src",t.image,q.Dc)}}function U(t,e){if(1&t&&(q.Xb(0,"mat-cell"),q.Lc(1,P,1,2,"img",15),q.Xb(2,"p",16),q.Nc(3),q.Wb(),q.Wb()),2&t){const t=e.$implicit;q.Fb(1),q.pc("ngIf",t.image),q.Fb(2),q.Oc(t.name)}}function M(t,e){1&t&&(q.Xb(0,"mat-header-cell"),q.Nc(1,"Number of Children"),q.Wb())}function B(t,e){if(1&t&&(q.Xb(0,"p",16),q.Nc(1),q.Wb()),2&t){const t=q.jc().$implicit;q.Fb(1),q.Oc(t.children)}}function V(t,e){1&t&&(q.Xb(0,"p",16),q.Nc(1,"No Children"),q.Wb())}function $(t,e){if(1&t&&(q.Xb(0,"mat-cell"),q.Lc(1,B,2,1,"p",18),q.Lc(2,V,2,0,"p",18),q.Wb()),2&t){const t=e.$implicit;q.Fb(1),q.pc("ngIf",t.children.length>0),q.Fb(1),q.pc("ngIf",0==t.children.length)}}function G(t,e){1&t&&(q.Xb(0,"mat-header-cell"),q.Nc(1,"Car Limit"),q.Wb())}function z(t,e){if(1&t&&(q.Xb(0,"mat-cell"),q.Xb(1,"p",16),q.Nc(2),q.Wb(),q.Wb()),2&t){const t=e.$implicit;q.Fb(2),q.Oc(t.carLimit)}}function H(t,e){1&t&&(q.Xb(0,"mat-header-cell"),q.Nc(1,"Remains"),q.Wb())}function Y(t,e){if(1&t&&(q.Xb(0,"mat-cell"),q.Xb(1,"p",16),q.Nc(2),q.Wb(),q.Wb()),2&t){const t=e.$implicit;q.Fb(2),q.Oc(t.remains)}}function J(t,e){1&t&&q.Sb(0,"mat-header-row")}const K=function(){return{y:"100%"}},Q=function(t){return{value:"*",params:t}};function Z(t,e){1&t&&q.Sb(0,"mat-row",19),2&t&&q.pc("@animate",q.tc(2,Q,q.sc(1,K)))}const tt=function(){return{value:"50"}};function et(t,e){if(1&t&&(q.Xb(0,"mat-table",3,4),q.Vb(2,5),q.Lc(3,T,1,0,"mat-header-cell",6),q.Lc(4,E,2,1,"mat-cell",7),q.Ub(),q.Vb(5,8),q.Lc(6,j,2,0,"mat-header-cell",6),q.Lc(7,U,4,2,"mat-cell",7),q.Ub(),q.Vb(8,9),q.Lc(9,M,2,0,"mat-header-cell",6),q.Lc(10,$,3,2,"mat-cell",7),q.Ub(),q.Vb(11,10),q.Lc(12,G,2,0,"mat-header-cell",6),q.Lc(13,z,3,1,"mat-cell",7),q.Ub(),q.Vb(14,11),q.Lc(15,H,2,0,"mat-header-cell",6),q.Lc(16,Y,3,1,"mat-cell",7),q.Ub(),q.Lc(17,J,1,0,"mat-header-row",12),q.Lc(18,Z,1,4,"mat-row",13),q.Wb()),2&t){const t=q.jc();q.pc("dataSource",t.dataSource)("@animateStagger",q.sc(4,tt)),q.Fb(17),q.pc("matHeaderRowDef",t.displayedColumns),q.Fb(1),q.pc("matRowDefColumns",t.displayedColumns)}}let st=(()=>{class t{constructor(t,e){this._contactsService=t,this.apis=e,this.displayedColumns=["checkbox","driverName","children","carLimit","remains"],this._unsubscribeAll=new x.a}ngOnInit(){this._contactsService.onContactsChanged.subscribe(t=>{this.dataSource=t,this.checkboxes={},t.map(t=>{this.checkboxes[t.id]=!1})}),this._contactsService.onSelectedContactsChanged.pipe(Object(C.a)(this._unsubscribeAll)).subscribe(t=>{for(const e in this.checkboxes)this.checkboxes.hasOwnProperty(e)&&(this.checkboxes[e]=t.includes(e));this.selectedContacts=t})}onSelectedChange(t){this._contactsService.toggleSelectedContact(t)}initRequest(){const t=new FormData;return t.append("tripsIds",JSON.stringify(this.selectedContacts)),t.append("requestId",this._contactsService.requestId),t}assignDrivers(){this.apis.assignDriversToRequest(this.initRequest()).subscribe(t=>{console.log(t)},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(q.Rb(X),q.Rb(L.a))},t.\u0275cmp=q.Lb({type:t,selectors:[["list-component"]],decls:4,vars:1,consts:[[3,"dataSource",4,"ngIf"],[1,"button"],["mat-raised-button","","color","primary","aria-label","More",3,"click"],[3,"dataSource"],["table",""],["matColumnDef","checkbox"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","driverName"],["matColumnDef","children"],["matColumnDef","carLimit"],["matColumnDef","remains"],[4,"matHeaderRowDef"],["class","item",4,"matRowDef","matRowDefColumns"],[3,"ngModel","ngModelChange","click"],["class","avatar",3,"alt","src",4,"ngIf"],[1,"text-truncate","font-weight-600"],[1,"avatar",3,"alt","src"],["class","text-truncate font-weight-600",4,"ngIf"],[1,"item"]],template:function(t,e){1&t&&(q.Lc(0,et,19,5,"mat-table",0),q.Xb(1,"div",1),q.Xb(2,"button",2),q.fc("click",function(){return e.assignDrivers()}),q.Nc(3," Send "),q.Wb(),q.Wb()),2&t&&q.pc("ngIf",e.dataSource.length>0)},directives:[I.t,n.b,h.j,h.c,h.e,h.b,h.g,h.i,h.d,h.a,i.a,f.n,f.q,h.f,h.h],styles:["list-component{display:flex;flex:1 1 auto;width:100%;flex-direction:column}list-component .mat-table{width:100%;background:transparent;box-shadow:none}list-component .mat-table .mat-column-checkbox{flex:0 1 64px;padding-left:18px}list-component .mat-table .mat-column-avatar{flex:0 1 64px}list-component .mat-table .mat-column-buttons{flex:0 1 80px}list-component .mat-table .mat-row{position:relative;cursor:pointer;padding:8px}list-component .mat-table .mat-row .mat-cell{min-width:0}list-component .mat-table .mat-row .mat-cell.mat-column-detail-button{flex:0 1 auto;padding:0 24px 0 0}@media screen and (min-width:1280px){list-component .mat-table .mat-row .mat-cell.mat-column-detail-button{display:none}}#add-contact-button{position:absolute;bottom:12px;right:12px;padding:0;z-index:99}@media screen and (max-width:599px){#add-contact-button{position:-webkit-sticky;position:sticky;top:calc(100vh - 120px);bottom:auto}}"],encapsulation:2,data:{animation:R.a}}),t})();const at=function(){return{delay:"50ms",scale:"0.2"}},nt=function(t){return{value:"*",params:t}},it=function(){return{delay:"100ms",x:"-25px"}},ct=[{path:"**",component:(()=>{class t{constructor(t,e,s){this._contactsService=t,this._fuseSidebarService=e,this._matDialog=s,this.searchInput=new f.e(""),this._unsubscribeAll=new x.a}ngOnInit(){this._contactsService.onSelectedContactsChanged.pipe(Object(C.a)(this._unsubscribeAll)).subscribe(t=>{this.hasSelectedContacts=t.length>0}),this.searchInput.valueChanges.pipe(Object(C.a)(this._unsubscribeAll),Object(v.a)(300),Object(w.a)()).subscribe(t=>{this._contactsService.onSearchTextChanged.next(t)})}ngOnDestroy(){this._contactsService.onSearchTextChanged.next(""),this._unsubscribeAll.next(),this._unsubscribeAll.complete()}toggleSidebar(t){this._fuseSidebarService.getSidebar(t).toggleOpen()}}return t.\u0275fac=function(e){return new(e||t)(q.Rb(X),q.Rb(W.a),q.Rb(N.b))},t.\u0275cmp=q.Lb({type:t,selectors:[["assign"]],decls:23,vars:9,consts:[["id","contacts",1,"page-layout","simple","left-sidebar","inner-sidebar","inner-scroll"],["fxLayout","column","fxLayoutAlign","start","fxLayout.gt-xs","row","fxLayoutAlign.gt-xs","space-between center",1,"header","accent","p-16","p-sm-24"],["fxLayout","row","fxLayoutAlign","start center"],["mat-icon-button","","fxHide.gt-sm","",1,"sidebar-toggle","mr-12",3,"click"],["fxLayout","row","fxLayoutAlign","start center",1,"logo"],[1,"logo-icon","mr-16"],[1,"logo-text","h1"],["fxLayout","row","fxLayoutAlign","center center","fxFlex","",1,"ml-sm-32"],[1,"search-wrapper","mt-16","mt-sm-0"],["fxFlex","","fxLayout","row","fxLayoutAlign","start center",1,"search"],["placeholder","Search",3,"formControl"],[1,"content"],["fusePerfectScrollbar","",1,"center","p-24","pb-56","pr-sm-92"],["dynamicHeight",""],["label","ALL"]],template:function(t,e){1&t&&(q.Xb(0,"div",0),q.Xb(1,"div",1),q.Xb(2,"div",2),q.Xb(3,"button",3),q.fc("click",function(){return e.toggleSidebar("contacts-main-sidebar")}),q.Xb(4,"mat-icon"),q.Nc(5,"menu"),q.Wb(),q.Wb(),q.Xb(6,"div",4),q.Xb(7,"mat-icon",5),q.Nc(8,"account_box "),q.Wb(),q.Xb(9,"span",6),q.Nc(10," Drivers "),q.Wb(),q.Wb(),q.Wb(),q.Xb(11,"div",7),q.Xb(12,"div",8),q.Xb(13,"div",9),q.Xb(14,"mat-icon"),q.Nc(15,"search"),q.Wb(),q.Sb(16,"input",10),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Xb(17,"div",11),q.Xb(18,"div",12),q.Xb(19,"div",11),q.Xb(20,"mat-tab-group",13),q.Xb(21,"mat-tab",14),q.Sb(22,"list-component"),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb(),q.Wb()),2&t&&(q.Fb(7),q.pc("@animate",q.tc(4,nt,q.sc(3,at))),q.Fb(2),q.pc("@animate",q.tc(7,nt,q.sc(6,it))),q.Fb(7),q.pc("formControl",e.searchInput))},directives:[_.a,O.c,O.b,n.b,F.b,l.a,O.a,f.c,f.n,f.f,A.a,b.b,b.a,st],styles:["#contacts .button{text-align:right;padding:1rem 2rem}#contacts .header .search-wrapper{width:100%;max-width:480px;border-radius:28px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}#contacts .header .search-wrapper .search{width:100%;height:48px;line-height:48px;padding:0 18px}#contacts .header .search-wrapper .search input{width:100%;height:48px;min-height:48px;max-height:48px;padding:0 16px;border:none;outline:none}#contacts .content{overflow:hidden}#contacts .content .sidebar:not(.locked-open){background:#fff}contacts-contact-list{display:flex;flex:1 1 auto;width:100%}contacts-contact-list .mat-table{width:100%;background:transparent;box-shadow:none}contacts-contact-list .mat-table .mat-column-checkbox{flex:0 1 64px;padding-left:18px}contacts-contact-list .mat-table .mat-column-avatar{flex:0 1 64px}contacts-contact-list .mat-table .mat-column-buttons{flex:0 1 80px}contacts-contact-list .mat-table .mat-row{position:relative;cursor:pointer;padding:8px}contacts-contact-list .mat-table .mat-row .mat-cell{min-width:0}contacts-contact-list .mat-table .mat-row .mat-cell.mat-column-detail-button{flex:0 1 auto;padding:0 24px 0 0}@media screen and (min-width:1280px){contacts-contact-list .mat-table .mat-row .mat-cell.mat-column-detail-button{display:none}}#add-contact-button{position:absolute;bottom:12px;right:12px;padding:0;z-index:99}@media screen and (max-width:599px){#add-contact-button{position:-webkit-sticky;position:sticky;top:calc(100vh - 120px);bottom:auto}}"],encapsulation:2,data:{animation:R.a}}),t})(),resolve:{contacts:X}}];let rt=(()=>{class t{}return t.\u0275mod=q.Pb({type:t}),t.\u0275inj=q.Ob({factory:function(e){return new(e||t)},providers:[X],imports:[[a.j.forChild(ct),n.c,i.b,r.c,o.d,l.b,d.c,u.c,c.p,h.k,p.b,b.c,m.a,g.a,g.f]]}),t})()}}]);